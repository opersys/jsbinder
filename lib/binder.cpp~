#include <binder/IServiceManager.h>

#include <node.h>

using namespace v8;
using namespace android;

Handle<Value> test(const Arguments& args) {
  sp<IServiceManager> sm = defaultServiceManager();
  
  if (sm == NULL) {
    return String::NewSymbol("no");
  }
  else {
    return String::NewSymbol("yes");
  } 
}

void Init(Handle<Object> exports, Handle<Object> module) {
  exports->Set(String::NewSymbol("test"), FunctionTemplate::New(test)->GetFunction());
}

NODE_MODULE(binder, Init);
